# miR_RF-TOOL
The "miR_RF-TOOL" repository hosts a machine learning-based application designed to evaluate the authenticity of pre-microRNAs. 

---

# miR_RF Tool Description

The miR_RF Tool is a predictive tool for evaluating pre-microRNAs based on machine learning. It consists of Python and R scripts designed to process RNAfold output, extract features, perform machine learning analysis, and generate predictions.

### Overview

The miR_RF Tool is comprised of Python and R scripts:
- **Python Script (Preprocessing):**
  - Extracts features from pre-miRNAs present in RNAfold output files.
  - Converts extracted features into numerical format and produces an intermediate file for R processing.
  - Input: RNAfold output file.
  - Output: Intermediate file with extracted features.
- **R Script (Machine Learning):**
  - Performs machine learning analysis on the intermediate file generated by the Python script.
  - Generates a text file containing predictions for each pre-miRNA in the input.
  - Input: Intermediate file generated by the Python script.
  - Output: Text file with predictions (2 for YES, 1 for NO) for each pre-miRNA.

### Input Requirements
The tool accepts RNAfold output files as input, structured in the following format:
- A file with a header line starting with ">" followed by five subsequent lines for each pre-miRNA. 
For every input string, made by the header line followed by the sequence, the output is composed by four lines corresponding to respectively:
1. MFE structure, reported within round brackets;
2. Ensemble structure, with energy reported in square brackets;
3. Centroid structure, with its energy and the minimal base-pair distance to all the structures in
the thermodynamic ensemble, reported in curly brackets.
4. Frequency of MFE structure in ensemble and ensemble diversity
   
- Multi-FASTA format is also supported.


### Input Example

Sample input file structure:

```plaintext
>hsa-let-7a-1 MI0000060 Homo sapiens let-7a-1 stem-loop
UGGGAUGAGGUAGUAGGUUGUAUAGUUUUAGGGUCACACCCACCACUGGGAGAUAACUAUACAAUCUACUGUCUUUCCUA
(((((.(((((((((((((((((((((.....(((...((((....)))).))))))))))))))))))))))))))))) (-34.20)
{((((.(((((((((((((((((((((.....(((...((({....}))).))))))))))))))))))))))))))))} [-35.18]
(((((.(((((((((((((((((((((.....(((...((((....)))).))))))))))))))))))))))))))))) {-34.20 d=3.42}
 frequency of mfe structure in ensemble 0.203686; ensemble diversity 5.63
...
```

### Output Example

The output file contains pre-miRNA names and their corresponding predictions:

```plaintext
"miRNA name"                                               "prediction"
">hsa-let-7a-1 MI0000060 Homo sapiens let-7a-1 stem-loop"       "2"
```

### Installation

1. Conda Installation in Command Line:
   - Follow the provided instructions in the CONDA installation file to install Conda on your system.

2. Activating the Conda environment:
   - Once Conda is installed, use the provided `configuration_file.yml` file to create an environment suitable for running the miR_RF Tool. In the command line, 
   navigate to the directory containing the `configuration_file.yml` file and type the following command:

   ```bash
   conda env create -f configuration_file.yml
   ```
    Note: Creating the environment may take some time, as Conda downloads and installs the necessary packages and dependencies.

   - After the environment is created, activate it by using the following command:

   ```bash
   conda activate miR_RF
   ```
   This step ensures that the appropriate environment, complete with all the necessary channels and packages required to run the miR_RF Tool, is activated. The 
   configuration_file.yml contains a specific set of channel configurations and package installations essential for the execution of the tool.
   By following these steps, you will have the correct environment with pre-configured channels and packages, ready to utilize the miR_RF Tool efficiently.

3. Setting up the directory:
   - Add in the same directory where it is present the `configuration_file.yml` file, the provided following files:
      - `df_feat_ext.py`: Python script for feature extraction from pre-miRNAs;
      - `make_pred.R`: R script for making predictions using machine learning;
      - `trained_model.RDS`: Includes the pre-trained model data necessary for predictions;
      - `application.py`: Executor program coordinating the feature extraction and prediction processes

  Note: make sure that `configuration_file.yml`, `trained_model.RDS`, `df_feat_ext.py`, `make_pred.R` and `application.py` are located in the same directory. In 
  order to check, use the ls command along with the file names. For example:

  ```bash
  cd /path/to/directory/containing/files
  path/to/directory/containing/files ls configuration_file.yml trained_model.RDS df_feat_ext.py make_pred.R application.py
  ```
  If any file is missing, the command will not display it in the directory listing.

4. Running the miR_RF Tool:
   - To utilize the miR_RF Tool for predicting pre-miRNAs, use the following command in the terminal or command line interface:

   ```bash
   python3 application.py input_file output_file
   ```

   Replace input_file with the name of the file containing pre-miRNA data in the required format. Similarly, replace output_file with the desired name for the 
   prediction results file.

   Example Usage:

   ```bash
   python3 application.py miRNA_input.txt predictions_output.txt
   ```
   miRNA_input.txt: Example input file containing pre-miRNA data.
   predictions_output.txt: Output file to store the prediction results.

   Ensure that the input file follows the specified format (see ### Input requirements section). Upon executing this command, the application.py program will 
   process the input data, execute feature extraction, and generate predictions using the trained model.

